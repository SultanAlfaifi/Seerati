<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data: https:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com https://unpkg.com; connect-src 'self' https://cdnjs.cloudflare.com https://unpkg.com;">
    <title>ุณูุฑุชู | ุตุงูุน ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ุงูุงุญุชุฑุงูู</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="https://unpkg.com/lucide@0.475.0" crossorigin="anonymous"></script>
    <!-- PDFMake library for robust, data-driven vector PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <script src="vfs_fonts.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="top-announcement">
        ุตููุน ุจุดุบู ุจูุงุณุทุฉ <a href="https://www.linkedin.com/in/alfaifi-sultan/" target="_blank"
            rel="noopener noreferrer">ุณูุทุงู ุงููููู</a>
    </div>
    <header class="header">
        <div class="brand">
            <div class="brand-icon"><i class="fas fa-file-invoice"></i></div>
            <h1 class="brand-title">ุณูุฑุชู</h1>
        </div>
        <div class="header-actions">
            <!-- Action buttons always shown, text hidden on mobile -->
            <button class="btn btn-ghost" onclick="toggleMobileModal()" id="preview-btn-mobile">
                <i data-lucide="eye" style="width:16px;height:16px;"></i> <span class="action-text">ุงููุนุงููุฉ</span>
            </button>
            <button class="btn btn-ghost" onclick="confirmClearDataModal()"
                style="color: #ef4444; background: rgba(239, 68, 68, 0.1);">
                <i data-lucide="trash-2" style="width:16px;height:16px;"></i> <span class="action-text">ุฅูุฑุงุบ
                    ุงูุญููู</span>
            </button>
            <button class="btn btn-ghost" onclick="resetData()">
                <i data-lucide="refresh-cw" style="width:16px;height:16px;"></i> <span class="action-text">ููุก
                    ุชุฌุฑูุจู</span>
            </button>
            <button class="btn btn-primary" id="download-btn-desktop" onclick="downloadPDF(event)">
                <i data-lucide="download" style="width:16px;height:16px;"></i> <span class="action-text">ุชุญููู ุงูู
                    PDF</span>
            </button>
        </div>
    </header>

    <div class="layout">
        <!-- Native Bottom Tab Bar on Mobile / Sidebar on Desktop -->
        <nav class="sidebar">
            <div class="nav-item active" onclick="showSection(1)" id="nav-sec-1">
                <i data-lucide="user"></i> <span class="nav-text">ุงูุฑุฆูุณูุฉ</span>
            </div>
            <div class="nav-item" onclick="showSection(2)" id="nav-sec-2">
                <i data-lucide="terminal"></i> <span class="nav-text">ุงูููุงุฑุงุช</span>
            </div>
            <div class="nav-item" onclick="showSection(3)" id="nav-sec-3">
                <i data-lucide="layout"></i> <span class="nav-text">ุงููุดุงุฑูุน</span>
            </div>
            <div class="nav-item" onclick="showSection(4)" id="nav-sec-4">
                <i data-lucide="briefcase"></i> <span class="nav-text">ุงูุฎุจุฑุงุช</span>
            </div>
            <div class="nav-item" onclick="showSection(5)" id="nav-sec-5">
                <i data-lucide="graduation-cap"></i> <span class="nav-text">ุงูุชุนููู</span>
            </div>
            <div class="nav-item" onclick="showSection(6)" id="nav-sec-6">
                <i data-lucide="award"></i> <span class="nav-text">ุงูุดูุงุฏุงุช</span>
            </div>
            <div class="nav-item" onclick="showSection(7)" id="nav-sec-7">
                <i data-lucide="star"></i> <span class="nav-text">ุงูุฌูุงุฆุฒ</span>
            </div>
            <div class="nav-item" onclick="showSection(8)" id="nav-sec-8">
                <i data-lucide="heart-handshake"></i> <span class="nav-text">ุงูุชุทูุน</span>
            </div>
        </nav>

        <div class="security-badge">
            <i data-lucide="shield-check" style="width:14px;height:14px;"></i>
            ุจูุงูุงุชู ุชูุญูุธ ูุญูููุง ูููุงู
        </div>

        <main class="editor" id="main-editor">
            <!-- SECTION 1: Personal -->
            <div class="section-wrapper active" id="sec-1">
                <div class="section-header">
                    <h2>ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</h2>
                    <p>ูุนูููุงุช ุงูุงุชุตุงู ุงูุฃุณุงุณูุฉ ุงูุชู ุชููุญ ุฃุตุญุงุจ ุงูุนูู ูุณููุฉ ูููุตูู ุฅููู ุจุณุฑุนุฉ.</p>
                </div>
                <div class="form-grid">
                    <div class="form-group col-span-2">
                        <label class="form-label">ุงูุงุณู ุงููุงูู (ุงูุฅูุฌููุฒู ุฃูุถู)</label>
                        <input type="text" class="form-input" id="in-name" style="direction: ltr;"
                            placeholder="ูุซุงู: Sultan AlFifi" oninput="saveAndRefresh()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" class="form-input" id="in-email" style="direction: ltr;"
                            placeholder="ูุซุงู: sultan@example.com" oninput="saveAndRefresh()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุฑูู ุงูุฌูุงู</label>
                        <input type="text" class="form-input" id="in-phone" style="direction: ltr;"
                            placeholder="ูุซุงู: +966 50 123 4567" oninput="saveAndRefresh()">
                    </div>
                    <div class="form-group" style="position: relative;">
                        <label class="form-label">
                            ููุตุฉ ุชูุงุตู <span style="font-size: 0.7rem; color: var(--accent); font-weight: 500;">(ูุชุนุฑู
                                ุนูู ุงูุฑุงุจุท ุจุฐูุงุก ๐ค)</span>
                        </label>
                        <div style="position: relative; display: flex; align-items: center;">
                            <input type="text" class="form-input" id="in-social"
                                style="direction: ltr; padding-left: 38px;" placeholder="https://linkedin.com/..."
                                oninput="handleSocialInput(this.value)">
                            <div id="social-icon-box"
                                style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 1.25rem; display: flex; align-items: center; justify-content: center; width: 20px;">
                                <i class="fas fa-link" style="color:var(--text-muted); opacity:0.5;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ุงููุฏููุฉุ ุงูุฏููุฉ</label>
                        <input type="text" class="form-input" id="in-location" style="direction: ltr;"
                            placeholder="ูุซุงู: Makkah, KSA" oninput="saveAndRefresh()">
                    </div>
                </div>
            </div>

            <!-- SECTION 2: Skills -->
            <div class="section-wrapper" id="sec-2">
                <div class="section-header">
                    <h2>ุงูููุงุฑุงุช ูุงููุฆุงุช</h2>
                    <p>ุฃุถู ุชุตูููุงุช ูููุงุฑุงุชู (ูุบุงุช ุจุฑูุฌุฉุ ุดูุงุฏุงุชุ ุฃุทุฑ ุนููุ ููุงุฑุงุช ูุงุนูุฉ).</p>
                </div>

                <div style="margin-bottom: 2rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <span style="font-size: 0.85rem; color: var(--text-muted); padding-top: 4px;">ุฅุถุงูุฉ ุณุฑูุนุฉ:</span>
                    <button class="btn-chip" onclick="addSkillSuggestion('Languages')">+ ูุบุงุช ุงูุจุฑูุฌุฉ</button>
                    <button class="btn-chip" onclick="addSkillSuggestion('Tools & Frameworks')">+ ุงูุฅุทุงุฑุงุช
                        ูุงูุฃุฏูุงุช</button>
                    <button class="btn-chip" onclick="addSkillSuggestion('Soft Skills')">+ ุงูููุงุฑุงุช ุงููุงุนูุฉ</button>
                </div>

                <div id="skills-list">
                    <!-- Dynamic Skills Form injected here -->
                </div>

                <button class="btn-outline" style="margin-top: 1rem;" onclick="addSkillObj()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ูุฆุฉ ููุงุฑุงุช ุฌุฏูุฏุฉ
                </button>
            </div>

            <!-- SECTION 3: Projects -->
            <div class="section-wrapper" id="sec-3">
                <div class="section-header">
                    <h2>ุงููุดุงุฑูุน ุงูููุนูุฉ</h2>
                    <p>ุฃุจุฑุฒ ุงูุชุทุจููุงุช ูุงูุฃูุธูุฉ ุงูุชู ููุช ุจุจูุงุฆูุง ููุชุฃููุฏ ุนูู ูุฏุฑุงุชู ุงูุนูููุฉ.</p>
                </div>
                <div id="project-list"></div>
                <button class="btn-outline" onclick="addProject()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ูุดุฑูุน ุฌุฏูุฏ
                </button>
            </div>

            <!-- SECTION 4: Experience -->
            <div class="section-wrapper" id="sec-4">
                <div class="section-header">
                    <h2>ุงูุฎุจุฑุงุช ุงูููููุฉ</h2>
                    <p>ุงุณุชุนุฑุถ ูุณูุฑุชู ุงููุธูููุฉ ูุฃูู ุงูุฅูุฌุงุฒุงุช ุงูุชู ุญููุชูุง ูู ูู ููุตุจ.</p>
                </div>
                <div id="experience-list"></div>
                <button class="btn-outline" onclick="addExperience()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ุฎุจุฑุฉ ุฌุฏูุฏุฉ
                </button>
            </div>

            <!-- SECTION 5: Education -->
            <div class="section-wrapper" id="sec-5">
                <div class="section-header">
                    <h2>ุงููุคููุงุช ุงูุชุนููููุฉ</h2>
                    <p>ุณุฌูู ุงูุฃูุงุฏูููุ ุงูุชุฎุตุตุ ูุชุงุฑูุฎ ุงูุชุฎุฑุฌ ูุงููุคุณุณุฉ ุงูุชุนููููุฉ.</p>
                </div>
                <div id="education-list"></div>
                <button class="btn-outline" onclick="addEducation()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ูุคูู ุฌุฏูุฏ
                </button>
            </div>

            <!-- SECTION 6: Certifications -->
            <div class="section-wrapper" id="sec-6">
                <div class="section-header">
                    <h2>ุงูุดูุงุฏุงุช ุงูููููุฉ</h2>
                    <p>ุฃุถู ุงูุดูุงุฏุงุช ุงูุงุญุชุฑุงููุฉ ุงูุชู ุญุตูุช ุนูููุง ูุชุซุจุช ุชุฎุตุตู.</p>
                </div>
                <div id="certification-list"></div>
                <button class="btn-outline" onclick="addCertification()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ุดูุงุฏุฉ ุฌุฏูุฏุฉ
                </button>
            </div>

            <!-- SECTION 7: Awards -->
            <div class="section-wrapper" id="sec-7">
                <div class="section-header">
                    <h2>ุงูุฌูุงุฆุฒ ูุงูุฅูุฌุงุฒุงุช</h2>
                    <p>ูู ุญููุช ูุฑูุฒุงู ูุชูุฏูุงู ุฃู ูุฒุช ุจูุณุงุจูุฉุ ุงุฐูุฑูุง ููุง ูุชููุฒ ุณูุฑุชู.</p>
                </div>
                <div id="award-list"></div>
                <button class="btn-outline" onclick="addAward()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ุฌุงุฆุฒุฉ ุฌุฏูุฏุฉ
                </button>
            </div>

            <!-- SECTION 8: Volunteering -->
            <div class="section-wrapper" id="sec-8">
                <div class="section-header">
                    <h2>ุงูุฃุนูุงู ุงูุชุทูุนูุฉ</h2>
                    <p>ูุณุงููุงุชู ุงููุฌุชูุนูุฉ ุชุธูุฑ ุฑูุญ ุงููุจุงุฏุฑุฉ ูุงูุชุนุงูู ูุฏูู.</p>
                </div>
                <div id="volunteering-list"></div>
                <button class="btn-outline" onclick="addVolunteering()">
                    <i data-lucide="plus"></i> ุฅุถุงูุฉ ุนูู ุชุทูุนู
                </button>
            </div>
        </main>

        <!-- Desktop Preview -->
        <aside class="preview-panel" id="desktop-preview-container"></aside>
    </div>



    <!-- Reset / Dummy Data Modal -->
    <div class="custom-modal-overlay" id="resetModal">
        <div class="custom-modal-box">
            <h3>ุชุนุจุฆุฉ ุจุจูุงูุงุช ุชุฌุฑูุจูุฉุ</h3>
            <p>ูู ุชุฑูุฏ ุชุนุจุฆุฉ ุงูุญููู ุจุจูุงูุงุช ุงูุชุฑุงุถูุฉ ููุชุฌุฑุจุฉุ ุณูุชู ูุณุญ ุฃู ุจูุงูุงุช ูุชุจุชูุง ุญุงููุงูุ ุชุฐูุฑ ุชุญููู ูุณุฎุฉ PDF ูุจู
                ุฐูู.</p>
            <div class="custom-modal-actions">
                <button class="btn-close-modal" onclick="closeResetModal()">ุฅูุบุงุก</button>
                <button class="btn-confirm-reset" onclick="confirmReset()">ุชุนุจุฆุฉ ุงูุญููู</button>
            </div>
        </div>
    </div>

    <!-- Clear All Modal -->
    <div class="custom-modal-overlay" id="clearModal">
        <div class="custom-modal-box">
            <h3 style="color: #ef4444;">ุญุฐู ุฌููุน ุงูุจูุงูุงุชุ</h3>
            <p>ูู ุฃูุช ูุชุฃูุฏ ูู ูุณุญ ุฌููุน ุจูุงูุงุช ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ูุชุตุจุญ ุงูุญููู ูุงุฑุบุฉ ุชูุงูุงูุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก.
            </p>
            <div class="custom-modal-actions">
                <button class="btn-close-modal" onclick="closeClearModal()">ุฅูุบุงุก</button>
                <button class="btn-danger-confirm" onclick="confirmClearAll()">ูุณุญ ุงูุจูุงูุงุช</button>
            </div>
        </div>
    </div>

    <!-- Mobile PDF Modal -->
    <div class="preview-modal" id="mobilePreviewModal">
        <div class="modal-header">
            <button class="btn-close-modal" onclick="toggleMobileModal()">ุฅูุบุงุก</button>
            <span>ุงููุนุงููุฉ ุงูููุงุฆูุฉ</span>
            <button class="btn-download-modal" onclick="downloadPDF(event)"><i data-lucide="download"
                    style="width:16px;"></i> ุชุญููู</button>
        </div>
        <div class="preview-modal-content" id="mobile-preview-container">
            <!-- Rendered Here -->
        </div>
    </div>

    <!-- HIDDEN TEMPLATE (MASTER - ORDERED EXACTLY AS REQUESTED) -->
    <div style="display:none;" id="cv-master-template">
        <div class="a4-wrapper" id="pdf-root">
            <div class="cv-document">
                <div class="cv-header-center">
                    <div class="cv-name" id="cv-name"></div>
                    <div class="cv-contact">
                        <span id="c-icon-phone" style="display:none;"><i class="fas fa-phone-alt cv-icon"></i> <span
                                id="cv-phone" class="mono"></span></span>
                        <span id="c-sep-1" class="cv-sep" style="display:none;">|</span>
                        <span id="c-icon-email" style="display:none;"><i class="fas fa-envelope cv-icon"></i> <span
                                id="cv-email" class="mono"></span></span>
                        <span id="c-sep-2" class="cv-sep" style="display:none;">|</span>
                        <span id="c-icon-social" style="display:none;"><i id="cv-social-icon"
                                class="fas fa-link cv-icon"></i> <span id="cv-social" class="mono"></span></span>
                        <span id="c-sep-3" class="cv-sep" style="display:none;">|</span>
                        <span id="c-icon-loc" style="display:none;"><i class="fas fa-map-marker-alt cv-icon"></i> <span
                                id="cv-location" class="mono"></span></span>
                    </div>
                </div>

                <div class="cv-section" id="v-skills" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">SKILLS</div>
                        <div id="v-skills-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-proj" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">PROJECTS</div>
                        <div id="v-project-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-exp" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">EXPERIENCE</div>
                        <div id="v-experience-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-edu" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">EDUCATION</div>
                        <div id="v-education-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-cert" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">CERTIFICATIONS</div>
                        <div id="v-certification-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-award" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">AWARDS & HONORS</div>
                        <div id="v-award-items"></div>
                    </div>
                </div>

                <div class="cv-section" id="v-vol" style="display:none;">
                    <div class="section-wrapper-pdf">
                        <div class="cv-section-title">VOLUNTEERING</div>
                        <div id="v-volunteering-items"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Date Picker UI -->
    <div class="date-picker-modal" id="datePickerModal">
        <div class="date-picker-content">
            <div class="dp-header">
                <h3>ุชุญุฏูุฏ ุงูุชุงุฑูุฎ</h3>
                <button class="btn-close-dp" onclick="closeDatePicker()"><i class="fas fa-times"></i></button>
            </div>
            <div class="dp-tabs">
                <button class="dp-tab active" id="tab-gregorian" onclick="setCalType('gregorian')">ูููุงุฏู</button>
                <button class="dp-tab" id="tab-hijri" onclick="setCalType('hijri')">ูุฌุฑู</button>
            </div>

            <div class="dp-body">
                <div class="dp-section">
                    <h4>ูู (Start)</h4>
                    <div class="dp-row">
                        <select id="dp-start-month" class="dp-select"></select>
                        <select id="dp-start-year" class="dp-select"></select>
                    </div>
                </div>
                <div class="dp-section">
                    <h4>ุฅูู (End)</h4>
                    <div class="dp-row-labels">
                        <label><input type="radio" name="dp_end_type" value="range" checked
                                onchange="toggleEndPicker()"> ูุชุฑุฉ ูุญุฏุฏุฉ</label>
                        <label><input type="radio" name="dp_end_type" value="present" onchange="toggleEndPicker()"> ุญุชู
                            ุงูุขู</label>
                        <label><input type="radio" name="dp_end_type" value="single" onchange="toggleEndPicker()"> ุชุงุฑูุฎ
                            ูุงุญุฏ ููุท</label>
                    </div>
                    <div class="dp-row" id="dp-end-group">
                        <select id="dp-end-month" class="dp-select"></select>
                        <select id="dp-end-year" class="dp-select"></select>
                    </div>
                </div>
            </div>

            <div style="margin-top: 2rem;">
                <button class="btn btn-primary" style="width: 100%; justify-content: center; padding: 0.85rem;"
                    onclick="saveDateSelection()">ุชุฃููุฏ ุงูุชุงุฑูุฎ</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>lucide.createIcons();</script>
</body>

</html>